<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMANOTE TEST - Candidate: Truong</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 20px;
            /* Improved body styles */
            font-size: 16px;
            /* Increased base font size */
            color: #333;
            /* More readable text color */
            max-width: 960px;
            /* Limit content width for better readability on larger screens */
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 0.5em;
            text-align: center;
        }

        h2 {
            font-size: 2em;
            margin-top: 1.5em;
            /* Reduced top margin */
            margin-bottom: 0.8em;
        }

        h3 {
            font-size: 1.5em;
            margin-top: 1.2em;
            /* Reduced top margin */
            margin-bottom: 0.6em;
        }

        p {
            margin-bottom: 1em;
        }

        ul {
            list-style-type: disc;
            margin-left: 30px;
            /* Slightly increased left margin for better visual separation */
            margin-bottom: 1em;
        }

        li {
            margin-bottom: 0.5em;
        }

        iframe {
            display: block;
            /* Prevent inline spacing issues */
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            /* Aspect ratio 16:9 */
            position: relative;
            border: 0;
            /* Remove default iframe border */
        }

        iframe iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        hr {
            border: 0;
            border-top: 1px solid #ccc;
            margin: 2em 0;
        }

        b {
            font-weight: bold;
        }

        a {
            color: #007bff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                font-size: 15px;
                padding: 15px;
            }

            h1 {
                font-size: 2em;
            }

            h2 {
                font-size: 1.7em;
            }

            h3 {
                font-size: 1.3em;
            }

            ul {
                margin-left: 20px;
            }
        }

        @media (max-width: 576px) {
            body {
                font-size: 14px;
                padding: 10px;
            }

            h1 {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.5em;
            }

            h3 {
                font-size: 1.2em;
            }
        }
    </style>
</head>

<body>
    <h1>AMANOTE TEST - Candidate: Bill Truong</h1>

    <h2>Introduction:</h2>

    <p>First and foremost, greetings to the evaluation team. I understand that my submission might differ slightly from
        the initial requirements I received. However, believing that creativity is welcome, I decided to take a more
        challenging approach. I'm confident that this prototype will offer a pleasant surprise. I can assure you that
        all the work presented here was completed within a 3-day timeframe, specifically from the evening of the 23rd to
        the evening of the 25th. Despite the tight schedule, I hope it leaves a positive impression.</p>

    <p>The game I've replicated is not Piano Tiles, but rather follows the gameplay style of <b>Osu!</b>. Due to the
        limited time, the code might not be as clean as I would have liked. However, everything is functional and
        working as intended.</p>

    <p>Below are two video trailers showcasing the prototype:</p>

    <ul>
        <li>Video 1: <a href="https://player.vimeo.com/video/1042131271">Gameplay Trailer (video-test-people)</a>
            <div style="padding:56.25% 0 0 0;position:relative;"><iframe
                    src="https://player.vimeo.com/video/1042131271?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479"
                    frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write"
                    style="position:absolute;top:0;left:0;width:100%;height:100%;" title="video-test-people"></iframe>
            </div>
            <script src="https://player.vimeo.com/api/player.js"></script>
        </li>
        <li>Video 2: <a href="https://player.vimeo.com/video/1042131283">Observation Trailer (video-test-obs)</a>
            <div style="padding:56.25% 0 0 0;position:relative;"><iframe
                    src="https://player.vimeo.com/video/1042131283?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479"
                    frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write"
                    style="position:absolute;top:0;left:0;width:100%;height:100%;" title="video-test-obs"></iframe>
            </div>
            <script src="https://player.vimeo.com/api/player.js"></script>
        </li>
    </ul>
    <p>You can download the game here: <a
            href="https://github.com/billtruong003/AmanoteTestBuild">https://github.com/billtruong003/AmanoteTestBuild</a>
    </p>

    <p>Feel free to explore the entire codebase in this repository.</p>

    <p>I'm Bill The Dev, you can check more about me on:</p>

    <ul>
        <li><a href="https://billthedevlab.tech">billthedevlab.tech</a></li>
        <li><a href="https://billthedev.com">billthedev.com</a></li>
    </ul>

    <hr>

    <h2>Additional Information:</h2>

    <h3>Reason for Choosing Osu!:</h3>

    <p>I opted for Osu! due to its unique and challenging rhythm-based gameplay, which focuses on precision and
        reflexes. I saw this as an exciting opportunity to test my game development skills, particularly in input
        handling and music synchronization. While not directly related, Osu!'s emphasis on rhythm and musical
        interaction could be seen as an interesting parallel to Amanote's field.</p>

    <h3>Key Features Implemented:</h3>

    <ul>
        <li><b>Beat detection and display of musical notes (Hit Circles, Sliders, Spinners) synchronized with the song
                (This is the feature we'll elaborate on below).</b></li>
        <li>Handling player input (mouse, keyboard) to interact with the musical notes.</li>
        <li>Calculating scores based on accuracy and combo.</li>
        <li>Displaying a basic user interface (HUD) with information such as score, accuracy, and progress bar.</li>
    </ul>

    <h3>Areas for Improvement with More Time:</h3>

    <ul>
        <li><b>Code Refactoring:</b> Restructure the code to make it more readable, maintainable, and scalable.</li>
        <li><b>Performance Optimization:</b> Improve game performance, especially when handling a large number of notes
            simultaneously.</li>
        <li><b>UI/UX Enhancements:</b> Design a more intuitive and engaging interface to provide a better user
            experience.</li>
    </ul>

    <h3>Future Development:</h3>

    <ul>
        <li>Adding more songs and customizable difficulty levels.</li>
        <li>Implementing a ranking system.</li>
        <li>Incorporating richer visual and sound effects.</li>
        <li>Supporting multiplayer mode.</li>
    </ul>
    <hr>

    <h3>Highlight: Real-time Beat Detection and Rhythm Generation</h3>

    <p>One of the most challenging and exciting features I implemented is the <b>real-time beat detection system</b>.
        This system analyzes the music's frequency spectrum to spawn notes in rhythmic patterns, creating a dynamic and
        engaging gameplay experience. Let me explain the core logic behind this system:</p>

    <h4>1. Audio Analysis:</h4>

    <ul>
        <li>The game continuously analyzes the audio spectrum data of the currently playing song using Unity's
            <code>AudioSource.GetSpectrumData()</code>. This function provides an array representing the frequencies
            present in the music at that moment.
        </li>
        <li>The code focuses on the <b>low-frequency range</b> of the spectrum (typically bass and drums), as this is
            where the most prominent beats are usually found.</li>
        <li>It calculates the <b>energy</b> of these low frequencies by summing up the relevant spectrum values.</li>
        <li>To smooth out variations and detect consistent beats, it also maintains a <b>history of recent low-frequency
                energies</b>.</li>
    </ul>

    <h4>2. Onset Detection (Beat Detection):</h4>

    <ul>
        <li>The system compares the current low-frequency energy to the average of the recent energy history.</li>
        <li>It calculates the <b>difference</b> between the current energy and the previous energy reading, identifying
            sudden increases (onsets).</li>
        <li>If this energy difference surpasses a predefined <b>onset threshold</b> (<code>onsetThreshold</code> in the
            code), and enough time has passed since the last detected beat (<code>minInterval</code>), a new beat is
            considered detected.</li>
    </ul>

    <h4>3. Rhythm Pattern Generation:</h4>

    <ul>
        <li>The system supports different rhythmic patterns, such as quarter notes, eighth notes, and a mixed pattern
            (you can easily add more).</li>
        <li>Based on the selected pattern, it determines whether to spawn a note at the current beat or not.
            <ul>
                <li><b>Quarter Notes:</b> Spawns a note on every detected beat.</li>
                <li><b>Eighth Notes:</b> Attempts to spawn notes more frequently, potentially twice per beat, if the
                    timing allows.</li>
                <li><b>Mixed Pattern:</b> Follows a predefined sequence (e.g., <code>1, 1, 0, 1</code>, where 1
                    represents spawning and 0 represents skipping) to create more complex rhythms.</li>
            </ul>
        </li>
    </ul>

    <h4>4. Note Placement and Sequencing:</h4>

    <ul>
        <li>When a note is spawned, the system attempts to place it in a new, non-overlapping position within predefined
            boundaries.</li>
        <li>It uses a <code>sequenceCounter</code> to track the sequence of notes, creating visual patterns on the
            screen.</li>
        <li>The system also controls a <code>TrailRenderer</code> to create visually appealing trails between
            consecutive notes, enhancing the visual feedback of the rhythmic patterns.</li>
    </ul>

    <h3>Code Logic Summary:</h3>

    <p>In essence, the code continuously monitors the music, detects sudden increases in low-frequency energy to
        identify beats, and then uses these beats to trigger the spawning of notes according to predefined rhythmic
        patterns. This creates a gameplay experience that is synchronized with the music, challenging the player to
        react to the rhythm.</p>

    <h3>Challenges and Considerations:</h3>

    <ul>
        <li><b>Parameter Tuning:</b> Finding the right values for <code>onsetThreshold</code>, <code>minInterval</code>,
            and other parameters was crucial for accurate and responsive beat detection. These values might need to be
            adjusted based on the specific music being played.</li>
        <li><b>Performance:</b> Real-time audio analysis can be computationally intensive. Careful optimization was
            necessary to maintain smooth performance, especially when dealing with a large number of notes.</li>
        <li><b>Rhythm Complexity:</b> The current implementation supports basic rhythm patterns. Expanding to more
            complex and varied patterns would require further development.</li>
    </ul>

    <h3>Conclusion:</h3>

    <p>This real-time beat detection and rhythm generation system was a significant technical challenge, but it's a core
        element that makes the game dynamic and engaging. I believe it showcases my ability to work with audio
        processing and create interactive experiences based on music.</p>

    <hr>

    <h2>Finally:</h2>

    <p>I hope that this prototype, along with the additional explanations, clearly demonstrates my abilities and
        potential. I look forward to receiving feedback from the evaluation team and having the opportunity to discuss
        this project further. Thank you very much!</p>

</body>

</html>